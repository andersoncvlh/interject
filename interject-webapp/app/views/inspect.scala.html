@(url: String, fileObject: FileObject)

@scripts = {
    <script src='@routes.Assets.at("bootstrap/js/modal.js")' type="text/javascript"></script>
    <script src='@routes.Assets.at("bootstrap/js/button.js")' type="text/javascript"></script>
    <script src='@routes.Assets.at("bootstrap/js/tab.js")' type="text/javascript"></script>
    <script src='@routes.Assets.at("hexview/hexview.js")' type="text/javascript"></script>
    <script src='@routes.Assets.at("javascripts/interject.js")' type="text/javascript"></script>
}

@styles = {
    <link rel="stylesheet" media="screen" href='@routes.Assets.at("hexview/hexview.default.css")'>
}

@main("List of actions", styles, scripts) {
	
          <ul class="nav nav-tabs" id="inspectTabs">
            <li><a href="#summary" data-toggle="tab">Summary & Actions</a></li>
            <li><a href="#inspectMetadata" data-toggle="tab">Metadata View</a></li>
            <li><a href="#inspectText" data-toggle="tab">Text View</a></li>
            <li><a href="#inspectHex" data-toggle="tab">Hex View</a></li>
          </ul>
          
          <div class="tab-content"> 
            <div class="tab-pane active" id="summary">
            
	<div class="row">
		<div class="col-xs-12 col-sm-5 col-md-5">
          <p></p>
					<table class="table table-striped">
					<thead>
                    <tr><th>Name:</th><th>@fileObject.getFilename</th></tr>
                    </thead>
                    <tbody>
                    <tr><th>Served as:</th><td>@fileObject.getServedContentTypeDetails</td></tr>
                    <tr><th>Identified as:</th><td>@fileObject.getContentTypeDetails</td></tr>
                    </tbody>
					</table>
			
		</div>
		<div class="col-xs-12 col-sm-7 col-md-7" role="main">
          <p></p>
			@for((action, index) <- fileObject.getActions.zipWithIndex) {
				<div class="panel panel-default">
					<div class="panel-heading">
					    <a href="@(action.getActionURL + url)">
                        <span class="action-image"> @if(!action.getImageUrl.isEmpty) {
                            <image class="img-polaroid"
                                    src="@routes.Assets.at(action.getImageUrl)" />&nbsp; }
                        </span>
						<span id="action-name-@index" class="panel-title">@action.getName</span>
						</a>
                        <span class="pull-right">
                            <a href="@(routes.Inspect.inspect( action.getActionURL + url))" class="btn btn-xs btn-default" role="button" title="Inspect the output of this action and determine any further access options.">INSPECT</a>
                            &nbsp;
                            <button type="button" id="rate-action-plus-@index" class="btn btn-xs btn-success rate-up" title="Rate this access option as: Good.">+1</button>
                            <button type="button" id="rate-action-minus-@index" class="btn btn-xs btn-danger rate-down" title="Rate this access option as: Not Good.">-1</button>
                            &nbsp;
                            <a href="@(action.getActionURL + url)" class="btn btn-xs btn-primary btn-go" role="button" title="Access this option.">GO</a>
                        </span>
					</div>
					<div class="panel-body">
                        <span class="action-description">@Html(action.getDescription)</span>
					</div>
				</div>
			}
		</div>
			
		</div>
		
            </div>
            <div class="tab-pane" id="inspectMetadata">
            ...TBA...
            </div>
            
            <div class="tab-pane" id="inspectText">
            ...TBA...
            </div>
            
            <div class="tab-pane" id="inspectHex">
            <!-- Via base 64 encoded binary data -->
    <div class="hexviewwindow" title=".exe file header">
        TVqQAAMAAAAEAAAA//8AALgAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
        AAAAAAAAAAAAAAAAgAAAAA4fug4AtAnNIbgBTM0hVGhpcyBwcm9ncmFtIGNhbm5v
        dCBiZSBydW4gaW4gRE9TIG1vZGUuDQ0KJAAAAAAAAABQRQAATAEHAMnPt0cAAAAA
        AAAAAOAADgELAQMAAA4AAACeAQAAAAAAuRAAAAAQAAAAIAAAAABAAAAQAAAAAgAA
        BAAAAAAAAAAEAAAAAAAAAAAAAgAABAAAzYhSAAIAAAAAABAAABAAAAAAEAAAEAAA
        AAAAABAAAAAAAAAAAAAAAABAAAA8AAAAALABAExEAAAAAAAAAAAAADBFUgD4EgAA
        AFAAAMwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
        AAAAAAAAAACgQAAAZAAAAAAAAAAAAAAAAAAA
        <form id="hexviewwindow_params">
            <input type="hidden" name="highlights" value="16:17:#F4FA58:Initial value of SP register,128:152:#54FAF8:Portable Executable signature and header" />
            <input type="hidden" name="row_width" value="16" />
            <input type="hidden" name="word_size" value="2" />
            <input type="hidden" name="caption" value=".exe file header" />
        </form>
    </div>
            </div>
            
            </div>
	
	
    <script>
      $('#inspectTabs a:first').tab('show')
    </script>

	<span id="last-rated" style="display:none;"></span>
	
	<div id="feedback-form" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="modalTitle" aria-hidden="true">
		<div class="modal-dialog">
		    <div class="modal-content">
				<div class="modal-header">
					<button id="dismiss-x" type="button" class="close" aria-hidden="true">&times;</button>
					<h3 class="modal-title" id="modalTitle">Thanks for you Rating - Please provide Feedback (Optional)</h3>
				</div>
				<div class="modal-body">
					<textarea id="feedback-message" class="form-control"></textarea>
				</div>
				<div class="modal-footer">
					<button type="button" id="feedback-close" class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
					<button type="button" id="feedback-send" class="btn btn-primary">Send</button>
				</div>
			</div>
		</div>
	</div>
}

